# ============================================================
# Strategic Analyst Ambient RAG Agent — Environment Variables
# Copy this file to .env and fill in your values.
# NEVER commit the .env file to git.
# ============================================================

# ── OVH AI Endpoints — shared auth token ─────────────────────────────────────
# Single token used for ALL OVH calls: LLM inference + BGE-M3 embeddings
OVH_KEY=your-ovh-token-here

# ── OVH LLM base URL ─────────────────────────────────────────────────────────
OVH_API_BASE_URL=https://oai.endpoints.kepler.ai.cloud.ovh.net/v1

# ── Model Selection ───────────────────────────────────────────────────────────
# Primary model for planners, supervisors, and orchestration
MAIN_AGENT_MODEL=Mistral-Nemo-Instruct-2407

# Task research agents (parallel workers)
TASK_AGENT_MODEL=Mistral-Nemo-Instruct-2407

# Utility model (memory updates, metadata extraction)
UTILITY_MODEL=Mistral-Nemo-Instruct-2407

# Long-context model for large report generation (131 k token window)
LONG_CONTEXT_MODEL=gpt-oss-20b

# Report writer model
WRITER_MODEL=gpt-oss-20b

# ── OVH Embedding Endpoint (BGE-M3) ──────────────────────────────────────────
# Same token as above (OVH_KEY). Used for query embedding at retrieval time.
# Must match the model that was used to create embeddings in the chunks table.
OVH_EMBEDDING_ENDPOINT_URL=https://bge-m3.endpoints.kepler.ai.cloud.ovh.net/api/text2vec
OVH_EMBEDDING_DIMENSION=1024

# ── Supabase ──────────────────────────────────────────────────────────────────
# Project URL (from Supabase dashboard → Settings → API)
SUPABASE_URL=https://your-project-id.supabase.co

# Service Role Key (from Supabase dashboard → Settings → API → service_role)
# WARNING: This key bypasses RLS — keep it server-side only
SUPABASE_SERVICE_KEY=eyJhbGci...

# Direct PostgreSQL connection string (for LangGraph PostgreSQL checkpointer in prod)
# Format: postgresql://postgres:[password]@db.[project-id].supabase.co:5432/postgres
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres

# ── Supabase Table Names ──────────────────────────────────────────────────────
SUPABASE_DOCUMENTS_TABLE=documents
SUPABASE_CHUNKS_TABLE=chunks
SUPABASE_REPORTS_TABLE=reports
SUPABASE_REPORT_CHUNKS_TABLE=report_chunks

# ── Tavily Web Search ─────────────────────────────────────────────────────────
# Get your key at: https://app.tavily.com
TAVILY_API_KEY=tvly-...

# ── LangSmith (Tracing & Evaluation) ─────────────────────────────────────────
# Get your key at: https://smith.langchain.com
LANGSMITH_API_KEY=lsv2_...

# Enable tracing (set to "true" to enable)
LANGCHAIN_TRACING_V2=true

# Project name in LangSmith dashboard
LANGCHAIN_PROJECT=Strategic Analyst Agent

# ── LangGraph Platform (Production Only) ─────────────────────────────────────
# Only needed when deploying to LangGraph Cloud / self-hosted LangGraph Platform
# LANGGRAPH_API_KEY=lg-...

# ── Agent Configuration Defaults ─────────────────────────────────────────────
# Default number of RAG chunks to retrieve per query
RAG_TOP_K=10

# Maximum number of parallel research task agents
MAX_RESEARCH_TASKS=6

# Maximum supervisor retry attempts per task before accepting any finding
MAX_SUPERVISOR_RETRIES=2

# ── Application Settings ──────────────────────────────────────────────────────
# Environment: "development" | "production"
ENVIRONMENT=development

# Log level: "DEBUG" | "INFO" | "WARNING" | "ERROR"
LOG_LEVEL=INFO
