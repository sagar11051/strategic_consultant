# ============================================================
# Strategic Analyst Ambient RAG Agent — Environment Variables
# Copy this file to .env and fill in your values.
# NEVER commit the .env file to git.
# ============================================================

# ── Anthropic / Claude ────────────────────────────────────────────────────────
# Primary LLM for all agent calls
ANTHROPIC_API_KEY=sk-ant-...

# Model overrides (optional — defaults used if not set)
# Main agent model (planner, supervisors, report writers)
MAIN_AGENT_MODEL=claude-sonnet-4-6
# Task agents (parallel research workers)
TASK_AGENT_MODEL=claude-sonnet-4-6
# Report writer model
WRITER_MODEL=claude-sonnet-4-6
# Utility model (memory updates, metadata extraction, section review — use Haiku for cost)
UTILITY_MODEL=claude-haiku-4-5-20251001

# ── Supabase ──────────────────────────────────────────────────────────────────
# Project URL (from Supabase dashboard → Settings → API)
SUPABASE_URL=https://your-project-id.supabase.co

# Service Role Key (from Supabase dashboard → Settings → API → service_role)
# WARNING: This key bypasses RLS — keep it server-side only
SUPABASE_SERVICE_KEY=eyJhbGci...

# Direct PostgreSQL connection string (for LangGraph PostgreSQL checkpointer in prod)
# Format: postgresql://postgres:[password]@db.[project-id].supabase.co:5432/postgres
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres

# ── Supabase Table Names ──────────────────────────────────────────────────────
# Table that holds company knowledge base chunks + embeddings
SUPABASE_DOCUMENTS_TABLE=documents
# Table for generated reports
SUPABASE_REPORTS_TABLE=reports
# Table for report chunks (for future RAG retrieval)
SUPABASE_REPORT_CHUNKS_TABLE=report_chunks

# ── Supabase Vector Search ────────────────────────────────────────────────────
# Name of the PostgreSQL stored procedure for similarity search
# (e.g. match_documents, search_documents)
SUPABASE_MATCH_FUNCTION=match_documents

# ── Embedding Model ───────────────────────────────────────────────────────────
# Embedding model used to index documents AND for query embedding at retrieval time
# MUST match what was used to create the embeddings in the documents table
# Options: "voyage-3", "text-embedding-3-small", "text-embedding-ada-002"
EMBEDDING_MODEL=voyage-3
EMBEDDING_DIMENSIONS=1024

# If using Voyage AI embeddings:
VOYAGE_API_KEY=pa-...

# If using OpenAI embeddings:
# OPENAI_API_KEY=sk-...

# ── Tavily Web Search ─────────────────────────────────────────────────────────
# Get your key at: https://app.tavily.com
TAVILY_API_KEY=tvly-...

# ── LangSmith (Tracing & Evaluation) ─────────────────────────────────────────
# Get your key at: https://smith.langchain.com
LANGSMITH_API_KEY=lsv2_...

# Enable tracing (set to "true" to enable)
LANGCHAIN_TRACING_V2=true

# Project name in LangSmith dashboard
LANGCHAIN_PROJECT=Strategic Analyst Agent

# ── LangGraph Platform (Production Only) ─────────────────────────────────────
# Only needed when deploying to LangGraph Cloud / self-hosted LangGraph Platform
# LANGGRAPH_API_KEY=lg-...

# ── Agent Configuration Defaults ─────────────────────────────────────────────
# Default number of RAG chunks to retrieve per query
RAG_TOP_K=8

# Maximum number of parallel research task agents
MAX_RESEARCH_TASKS=6

# Maximum supervisor retry attempts per task before accepting any finding
MAX_SUPERVISOR_RETRIES=2

# ── Application Settings ──────────────────────────────────────────────────────
# Environment: "development" | "production"
ENVIRONMENT=development

# Log level: "DEBUG" | "INFO" | "WARNING" | "ERROR"
LOG_LEVEL=INFO

# ── Optional: Slack Notification (for report completion alerts) ───────────────
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
